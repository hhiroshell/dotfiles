# ================
# Common Settings
# ================

# pkgmux
export PATH="${HOME}/src/github.com/hhiroshell/dotfiles/pkgmux:${PATH}"

# fzf
# set up fzf key bindings and fuzzy completion
source <(fzf --zsh)

export FZF_DEFAULT_OPTS=" \
    --height 30% \
    --layout=reverse \
    --border \
    --color=light \
    --color=bg+:#E3E1E0 \
    --color=pointer:red,marker:red,gutter:#F0EDEC"

# history
setopt extended_history
alias history='history -t "%F %T"'

# goimports-reviser
alias goimports-reviser='goimports-reviser -rm-unused -recursive'

# exit
alias q='exit'

# ==========
# Utilities
# ==========

{{ if eq .chezmoi.os "linux" -}}
# Clipboard utilities for compatibility with macOS
if command -v xclip &> /dev/null; then
    alias pbcopy='xclip -selection clipboard'
    alias pbpaste='xclip -selection clipboard -o'
fi
{{ end -}}

today() {
    date '+%Y-%m-%d'
}

temp() {
    mkdir -p "${HOME}/temp/$(today)"
    cd $_

    TEMPDIR="$(pwd)" && export TEMPDIR
    echo "environment valuable \"TEMPDIR\" is set to \"$(pwd)\" ."
}

# Line count utility
# cf. https://qiita.com/UedaTakeyuki/items/c025b334fe18a391c421
cloc-git() {
    tempdir="$(mktemp -d)"
    git clone --depth 1 "$1" "${tempdir}"
    cloc "${tempdir}"
}
